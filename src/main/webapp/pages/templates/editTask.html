		<div class="collection-object">
		<form action="#" th:action="@{/editor/task}" th:object="${task}" method="post" id="taskEditForm">
			<h3 th:if="${create}" th:text="#{firstline.create.task}">Create new task</h3>
			<h3 th:if="${!create}" th:text="#{firstline.update.task}">Update task</h3>
			<hr/>
			<input type="hidden" th:field="*{id}" />
  			<p th:text="#{editor.task.name}"></p>
                                <div class="row">
                                    <div class="col-md-6">
                                        <input type="text" class="form-control" th:field="*{name}" placeholder="Task name" th:placeholder="#{editor.placeholder.name}" onblur="addCheck(this, 5, 100)"/>
                                    </div>
                               </div>
   			<p th:text="#{editor.task.due}"></p>
                                <div class="row">
                                    <div class="col-md-12">
                                        <input type="date" class="form-control" th:field="*{dueDate}"/>
                                    </div>
                                </div>
   			<p th:text="#{editor.task.source}"></p>
                                <div class="row">
                                    <div class="col-md-12">
									<select th:field="*{source}" size="4">
										<option th:each="lang : ${languages}" th:value="${lang.id}" th:text="${lang.code}">EN</option>
									</select>
                                    </div>
                                </div>
   			<p th:text="#{editor.task.target}"></p>
                                <div class="row">
                                    <div class="col-md-12">
									<select th:field="*{target}" size="4">
										<option th:each="lang : ${languages}" th:value="${lang.id}" th:text="${lang.code}">EN</option>
									</select>
                                    </div>
                                </div>
                                <hr class="separator"/>
   			<p th:text="#{editor.task.performers}"></p>
                                <div class="row">
                                    <div class="col-md-12">
									<select id="performers" name="performers" size="6" multiple="true">
										<option value="all" th:text="#{editor.task.performers.all}">All</option>
										<option th:each="user : ${users}" th:value="${user.id}" th:text="${user.username}">admin</option>
									</select>
                                    </div>
                                </div>
	<script th:inline="javascript">
			/*<![CDATA[*/
				var performers = /*[[${performers}]]*/ [];
				if (performers.length > 0 && performers[0] < 0)	// all users
					$("#performers :first").attr("selected", "selected");
				else
					for (i=0; i<performers.length; i++)
						$("#performers option[value='" + performers[i] + "']").attr("selected", "selected");
			/*]]>*/
			</script>
                                <hr class="separator"/>
   			<p th:text="#{editor.task.type}"></p>
                                <div class="row">
                                    <div class="col-md-12">
									<select th:field="*{type}">
										<option th:text="#{task.type.text}" value='1'>Text</option>
										<option th:text="#{task.type.acronis}" value='2'>Acronis ID</option>
										<option th:text="#{task.type.link}" value='3'>Link</option>
										<option th:text="#{task.type.file}" value='4'>XLS File</option>
									</select>
                                    </div>
                                </div>
            <div id="textAbout">
   			<p th:text="#{task.type.original}"></p>
                                <div class="row">
                                    <div class="col-md-12">
                                        <textarea class="form-control" type="textarea" th:field="*{original}" placeholder="Original text" th:placeholder="#{task.type.original}"></textarea>
                                    </div>
                                </div>
   			<p th:text="#{task.type.translate}"></p>
                                <div class="row">
                                    <div class="col-md-12">
                                        <textarea class="form-control" type="textarea" th:field="*{about}" placeholder="Translated text" th:placeholder="#{task.type.translate}"></textarea>
                                    </div>
                                </div>
            </div>
            <div id="acronisAbout" hidden="true">
   			<p th:text="#{task.type.acronis}"></p>
                                <div class="row">
                                    <div class="col-md-12">
                                        <input type="text" class="form-control" placeholder="Acronis ID" id="acronisValue" th:placeholder="#{task.type.acronis}"/>
                                    </div>
                                </div>
            </div>
            <div id="linkAbout" hidden="true">
   			<p th:text="#{task.type.link}"></p>
                                <div class="row">
                                    <div class="col-md-12">
                                        <input type="text" class="form-control" placeholder="Link" id="linkValue" th:placeholder="#{task.type.link}"/>
                                    </div>
                                </div>
            </div>
            <div id="fileAbout" hidden="true">
   			<p th:text="#{task.type.filetext}"></p>
                                <div class="row">
                                    <div class="col-md-12">
                                        <input type="text" class="form-control" placeholder="Link" id="fileValue" th:placeholder="#{task.type.file}"/>
                                    </div>
                                </div>
            </div>
	<script th:inline="javascript">
			/*<![CDATA[*/
			
			function hideOrShowElement(element, show) {
				if (show) element.show();
				else element.hide();
			}

            $("#type").on('input', function() {
            	hideOrShowElement($("#textAbout"), $("#type").val() == "1");
            	hideOrShowElement($("#acronisAbout"), $("#type").val() == "2");
            	hideOrShowElement($("#linkAbout"), $("#type").val() == "3");
            	hideOrShowElement($("#fileAbout"), $("#type").val() == "4");
            });

            $("#taskEditForm").on('submit', function() {
            	if ($("#type").val() == "2")
            		$("#about").val($("#acronisValue").val());
            	if ($("#type").val() == "3")
            		$("#about").val($("#linkValue").val());
            	if ($("#type").val() == "4")
            		$("#about").val($("#fileValue").val());
            });
            $("#type").trigger('input');
			/*]]>*/
			</script>
			<p><input type="submit" class="btn btn-primary btn-block" th:value="${create}? #{editor.create} : #{editor.update}" value="submit" /></p>
		</form>
		</div>